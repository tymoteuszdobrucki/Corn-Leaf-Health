schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cornLeafHealth/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: e9759580d7e55c6158d88d4eadc51a04
      size: 604
    - path: src/cornLeafHealth/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 92298c65f1a172c618fc92a590a23687
      size: 942
    outs:
    - path: artifacts/data_ingestion/Corn_Leaf_Health_Dataset
      hash: md5
      md5: 834c9afe8d76f9283d11aeb0dea6049b.dir
      size: 171178074
      nfiles: 4188
  prepare_base_model:
    cmd: python src/cornLeafHealth/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: e9759580d7e55c6158d88d4eadc51a04
      size: 604
    - path: src/cornLeafHealth/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: 49e700abee5aef4d12029a579c903d47
      size: 983
    params:
      params.yaml:
        CLASSES: 4
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 1ec84588e65334cc268d32ad3996db9d.dir
      size: 59649952
      nfiles: 2
  training:
    cmd: python src/cornLeafHealth/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/data_ingestion/Corn_Leaf_Health_Dataset
      hash: md5
      md5: 834c9afe8d76f9283d11aeb0dea6049b.dir
      size: 171178074
      nfiles: 4188
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 1ec84588e65334cc268d32ad3996db9d.dir
      size: 59649952
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: e9759580d7e55c6158d88d4eadc51a04
      size: 604
    - path: src/cornLeafHealth/pipeline/stage_03_model_training.py
      hash: md5
      md5: bf4b2bcd2dee21a0be93cc7a127ced7e
      size: 931
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 32
        EPOCHS: 1
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/training/model.h5
      hash: md5
      md5: 4d08d1ae317f301f0f9e89f1fb60e62e
      size: 2132760
  evaluation:
    cmd: python src/cornLeafHealth/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/Corn_Leaf_Health_Dataset
      hash: md5
      md5: 834c9afe8d76f9283d11aeb0dea6049b.dir
      size: 171178074
      nfiles: 4188
    - path: artifacts/training/model.h5
      hash: md5
      md5: 4d08d1ae317f301f0f9e89f1fb60e62e
      size: 2132760
    - path: config/config.yaml
      hash: md5
      md5: e9759580d7e55c6158d88d4eadc51a04
      size: 604
    - path: src/cornLeafHealth/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: 2a3a1b05e6ad1e348ae5ecffabbaa04c
      size: 810
    params:
      params.yaml:
        BATCH_SIZE: 32
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: 797b510d9ca6de358cde12aae9500a0c
      size: 73
